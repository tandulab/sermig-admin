import{o as x,a as B,s as u,c as k,_ as D,r as m,y as L,b as v,v as T,w as g,h as V,f as i,t as y,g as l,z as U,u as z,x as b,e as h}from"../index18873.js";import{e as P,u as E,s as M}from"./helpers18873.js";import{u as w,a as N}from"./upload18873.js";import{F as O}from"./vee-validate.esm18873.js";const j={setup(){x(()=>{c.value=!0,_.value={first:0,rows:e.value.rows,sortField:null,sortOrder:null},_.value.page=0,a()});const r=B(),e=u(),n=u(),t=u(),c=u(!0),_=u(),d=u(0),f=w(),p=k(()=>f.responseBanners);function a(){c.value=!0,setTimeout(()=>{s()},Math.random()*1e3+250)}const s=async function(){await f.fetchAll().then(()=>{c.value=!1}).catch(o=>{c.value=!1,P(r,o)})};return{dt:e,responseBanners:p,loading:c,totalRecords:d,lazyParams:_,currentOrder:n,op:t,loadLazyData:a}}};const A=["innerHTML"],H=["innerHTML"],I={class:"flex justify-content-center"};function R(r,e,n,t,c,_){const d=m("Column"),f=m("Button"),p=m("DataTable"),a=L("tooltip");return v(),T(p,{value:t.responseBanners.banners,lazy:!0,paginator:!1,ref:"dt",loading:t.loading,stripedRows:"",class:"banner"},{empty:g(()=>[V(" Nessuna configurazione trovata. ")]),default:g(()=>[i(d,{header:"Location",field:"location",style:{"min-width":"200px"}},{body:g(({data:s})=>{var o;return[V(y(((o=s.location)==null?void 0:o.name)||"Tutte le location"),1)]}),_:1}),i(d,{header:"Testo PDF biglietto standard",style:{"vertical-align":"top"}},{body:g(({data:s})=>{var o;return[l("div",{innerHTML:(o=s.translations.it.standard_ticket_pdf)==null?void 0:o.text},null,8,A)]}),_:1}),i(d,{header:"Testo PDF biglietto a data aperta",style:{"vertical-align":"top"}},{body:g(({data:s})=>{var o;return[l("div",{innerHTML:(o=s.translations.it.open_ticket_pdf)==null?void 0:o.text},null,8,H)]}),_:1}),i(d,{header:""},{body:g(({data:s})=>[l("div",I,[U(i(f,{link:"",icon:"pi pi-pencil",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:o=>r.$emit("onEditBanner",s)},null,8,["onClick"]),[[a,"Modifica",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"])}const q=D(j,[["render",R]]),G={props:["banner"],setup(r,e){x(()=>{r.banner&&(n.value=Object.assign({},r.banner))});const n=u({}),{showLoader:t,hideLoader:c}=E(),_=B(),d=u("it"),f=w(),p=N(),a=z(),s=k(()=>a.languages),o=k(()=>p.responseUploads);return{form:n,lang_selected:d,uploadedImage:o,languages:s,onSubmit:function(){t();let C={it:{standard_ticket_pdf:n.value.translations.it.standard_ticket_pdf.text,open_ticket_pdf:n.value.translations.it.open_ticket_pdf.text},en:{standard_ticket_pdf:n.value.translations.en.standard_ticket_pdf.text,open_ticket_pdf:n.value.translations.en.open_ticket_pdf.text}};const S={banner:n.value};S.banner.translations=C,f.updateCopyPDF(S).then(()=>{c(),M(_,{message:"Testo Pdf aggiornato correttamente",error:!1}),e.emit("onSubmit")}).catch(F=>{P(_,F)})},resetForm:function(){e.emit("onSubmit",n.value)}}},components:{Form:O}};const J={class:"formgrid grid flex-column mt-3"},K={class:"field col-12 flex flex-column"},Q=l("label",{for:"location"},"Location",-1),W={class:"col-12 flex justify-content-end m-0 p-0 align-items-center mt-4"},X={key:0,class:"formgrid grid card mt-3"},Y={class:"col-12 mt-0 p-0"},Z={class:"field"},$={key:1,class:"formgrid grid card mt-3"},tt={class:"col-12 mt-0 p-0"},et={class:"field"},ot={class:"flex align-items-center justify-content-end mt-6"};function nt(r,e,n,t,c,_){const d=m("InputText"),f=m("Dropdown"),p=m("Editor"),a=m("Button"),s=m("Form");return t.form?(v(),T(s,{key:0,onSubmit:t.onSubmit,class:"banner"},{default:g(()=>[l("div",J,[l("div",K,[Q,t.form.location?(v(),T(d,{key:0,modelValue:t.form.location.name,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.location.name=o),disabled:""},null,8,["modelValue"])):b("",!0)])]),l("div",W,[i(f,{options:t.languages,optionLabel:"name",optionValue:"value",class:"m-2 capitalize dropdown-lng",modelValue:t.lang_selected,"onUpdate:modelValue":e[1]||(e[1]=o=>t.lang_selected=o)},null,8,["options","modelValue"])]),t.form.translations?(v(),h("div",X,[l("h3",Y," Testo pdf (biglietti standard) ("+y(t.lang_selected.toUpperCase())+") ",1),l("div",Z,[i(p,{modelValue:t.form.translations[t.lang_selected].standard_ticket_pdf.text,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.translations[t.lang_selected].standard_ticket_pdf.text=o),editorStyle:"height: 320px"},null,8,["modelValue"])])])):b("",!0),t.form.translations?(v(),h("div",$,[l("h3",tt," Testo pdf (biglietti a data aperta)("+y(t.lang_selected.toUpperCase())+") ",1),l("div",et,[i(p,{modelValue:t.form.translations[t.lang_selected].open_ticket_pdf.text,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.translations[t.lang_selected].open_ticket_pdf.text=o),editorStyle:"height: 320px"},null,8,["modelValue"])])])):b("",!0),l("div",ot,[i(a,{label:"Annulla",text:"",onClick:e[4]||(e[4]=o=>t.resetForm())}),i(a,{label:"Conferma",type:"submit"})])]),_:1},8,["onSubmit"])):b("",!0)}const at=D(G,[["render",nt]]),st={setup(){x(()=>{});const r=u(!1),e=u(),n=u({});return{visibleDialog:r,pdfTicketsTable:e,currentBanner:n,onSubmit:function(){r.value=!1,e.value.loadLazyData()},openEditDialog:function(_){r.value=!0,n.value=_}}},components:{PdfTicketsTable:q,PdfTicketsDialog:at}},lt=l("h1",null,"Configurazioni PDF",-1);function it(r,e,n,t,c,_){const d=m("PdfTicketsTable"),f=m("PdfTicketsDialog"),p=m("Dialog");return v(),h("div",null,[lt,i(d,{ref:"pdfTicketsTable",onOnEditBanner:e[0]||(e[0]=a=>t.openEditDialog(a))},null,512),i(p,{visible:t.visibleDialog,"onUpdate:visible":e[2]||(e[2]=a=>t.visibleDialog=a),modal:"",header:"Configurazione PDF",style:{width:"50rem"}},{default:g(()=>[i(f,{onOnSubmit:e[1]||(e[1]=a=>t.onSubmit()),banner:t.currentBanner},null,8,["banner"])]),_:1},8,["visible"])])}const ft=D(st,[["render",it]]);export{ft as default};
