import{D as m}from"./datetime26769.js";import{u as M,e as g}from"./helpers26769.js";import{l as D,q as A,d as V,o as k,s as F,a as S,c as $,_ as B,r as v,b as d,e as r,g as o,f as i,x as w,w as t,h as l,t as u}from"../index26769.js";class C{static async fetchAllReveliaDashboard(e){return(await D("/admin/dashboards",e)).data}static async fetchAllDashboard(e){return(await D("/admin/dashboard",e)).data}}const L=A({id:"dashboard",state:()=>({dashboard:{},dashboards:[],response_dashboards:{}}),getters:{allDashboards:a=>a.dashboard,responseDashboards:a=>a.response_dashboards,getCurrentDashboard:a=>a.dashboard},actions:{async fetchAllReveliaDashboard(a){await C.fetchAllReveliaDashboard(a).then(e=>{this.response_dashboards=e,this.dashboard=this.response_dashboards.dashboard})},async fetchAllDashboard(a){await C.fetchAllDashboard(a).then(e=>{this.dashboard=e})}}}),N=V({setup(){k(()=>{a.value.date=m.now().setLocale("it").toFormat("MMMM/yyyy").replace(/^\w/,s=>s.toUpperCase()),c()});const a=F({}),e=L(),{showLoader:h,hideLoader:b}=M(),f=S(),y=$(()=>e.allDashboards),c=async function(){h();let s="",n="";if(a.value.date&&a.value.date.toString().includes("/")){let _=m.fromFormat(a.value.date,"MMMM/yyyy",{locale:"it"});s=_.month+"",n=_.year+""}else s=m.fromJSDate(new Date(a.value.date)).toFormat("M",{locale:"it"}),n=m.fromJSDate(new Date(a.value.date)).toFormat("yyyy",{locale:"it"});const p=new Map;p.set("month",s),p.set("year",n),await e.fetchAllDashboard(p).then(()=>{b()}).catch(_=>{b(),g(f,_)})};return{form:a,dashboards:y,fetchAllDashboard:c}}});const x={class:"dashboard"},R=o("h1",null,"Dashboard",-1),T={key:0,class:"flex align-items-center"},q={class:"field col-2 flex flex-column"},J=o("label",null,"Data",-1),U={key:1},z={class:"flex align-items-center flex-wrap"},E={class:"col-4"},G={class:"col-4"},P={class:"col-4"},j={key:0},H={key:1},I={class:"col-4"},K={key:0},O={key:1};function Q(a,e,h,b,f,y){const c=v("Calendar"),s=v("Card");return d(),r("div",x,[R,a.form?(d(),r("div",T,[o("div",q,[J,i(c,{modelValue:a.form.date,"onUpdate:modelValue":[e[0]||(e[0]=n=>a.form.date=n),e[1]||(e[1]=n=>a.fetchAllDashboard())],view:"month",dateFormat:"MM/yy"},null,8,["modelValue"])])])):w("",!0),a.dashboards?(d(),r("div",U,[o("div",z,[o("div",E,[i(s,null,{title:t(()=>[l(" Prenotazioni totali mese ")]),content:t(()=>[l(u(a.dashboards.orders_total_month||"0"),1)]),_:1})]),o("div",G,[i(s,null,{title:t(()=>[l(" Visitatori totali mese ")]),content:t(()=>[l(u(a.dashboards.quantity_total_month||"0"),1)]),_:1})]),o("div",P,[i(s,null,{title:t(()=>[l(" Fatturato totale mese ")]),content:t(()=>[a.dashboards.total_month?(d(),r("span",j," € "+u((+a.dashboards.total_month).toFixed(2)||"-"),1)):(d(),r("span",H," 0 "))]),_:1})]),o("div",I,[i(s,null,{title:t(()=>[l(" Fatturato Basilica di Superga")]),content:t(()=>[a.dashboards.superga?(d(),r("span",K,"€ "+u((+a.dashboards.superga).toFixed(2)),1)):(d(),r("span",O,"0"))]),_:1})])])])):w("",!0)])}const Z=B(N,[["render",Q]]);export{Z as default};
